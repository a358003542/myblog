Title: python语言学习之-第一谈
Slug: python-talk-one
Date: 2016-01-01
Modified: 2018-07-25
Tags: python, 网络抓取,

[TOC]

Python是个成功的脚本语言。它最初由Guido van Rossum开发，在1991年第一次发布。Python由ABC和Haskell语言所启发。Python是一个高级的、通用的、跨平台、解释型的语言。一些人更倾向于称之为动态语言。它很易学，Python是一种简约的语言。它的最明显的一个特征是，不使用分号或括号，Python使用缩进。现在，Python由来自世界各地的庞大的志愿者维护。

python现在主要有两个版本区别，python2和python3。作为新学者推荐完全使用python3编程，本文档完全基于python3。

## 安装和配置

python的安装和配置在linux没什么好说了，windows下的安装主要是编辑好系统环境变量 `PATH` 值，好让读者可以在cmd或者powershell下调用python命令。

![img]({static}/images/python/python-env-windows.png "python在windows下PATH环境变量的配置")

这个初次安装的时候程序有这个选项的。

## 进入python的REPL环境

在终端中输入python即进入python语言的REPL环境，很多linux系统目前默认的是python2。你可以运行：

    python  --version

来查看默认的python版本号。

要进入python3在终端中输入python3即可。

## python命令行用法

命令行的一般格式就是：

    python3  [可选项]  test.py  [可选参数1 可选参数2]

同样类似的运行 `python3  --help`
即可以查看python3命令的一些可选项。比如加入**-i**选项之后，python执行完脚本之后会进入REPL环境继续等待下一个命令，这个在最后结果一闪而过的时候有用。

### python执行脚本参数的传递

上面的命令行接受多个参数都没有问题的，不会报错，哪怕你在py文件并没有用到他们。在py文件中要使用他们，首先导入sys模块，然后sys.argv\[0\]是现在这个py文件在系统中的文件名，接下来的sys.argv\[1\]就是之前命令行接受的第一个参数，后面的就依次类推了。

## 代码注释

python语言的注释符号和bash语言（linux终端的编程语言）一样用的是\#符号来注释代码。然后py文件开头一般如下面代码所示：

    #!/usr/bin/env python3
    #-*-coding:utf-8-*-

其中代码第一行表示等下如果py文件可执行模式执行那么将用python3来编译[^1]，第二行的意思是py文件编码是utf-8编码的，python3直接支持utf-8各个符号，这是很强大的一个更新。

多行注释可以利用编辑器快速每行前面加上\#符号。

### Unicode码支持

前面谈及python3是可以直接支持Unicode码的，如果以可执行模式加载，那么第二行需要写上：

    #-*-coding:utf-8-*-

这么一句。


读者请实验下面这个小例子，这将打印一个笑脸符号：

    #!/usr/bin/env python3
    #-*-coding:utf-8-*-
    print('\u263a')
    
    ☺
    >>> 

上面的数字就是笑脸符号具体的Unicode码（十六进制）。

## 代码多行表示一行

这个技巧防止代码越界所以经常会用到。用反斜线 `\` 即可。不过更常用的是将表达式用圆括号 `()` 括起来，这样内部可以直接换行并继续。在python中任何表达式都可以包围在圆括号中。

### 一行表示多行

python中一般不用分号，但是分号的意义大致和bash或者c语言中的意义类似，表示一行结束的意思。其中c语言我们知道是必须使用分号的。

## 输入和输出

### 最基本的input和print命令

input函数请求用户输入，并将这个值赋值给某个变量。注意赋值之后类型是字符串，但后面你可以用强制类型转换------int函数（变成整数），float函数（变成实数），str函数（变成字符串）------将其转变过来。print函数就是一般的输出函数。

读者请运行下面的例子：
```
    x=input('请输入一个实数：')
    string='你输入的这个实数乘以2等于：'+ str(float(x)*2)
    print(string)
```
## \_\_main\_\_和\_\_name\_\_

按照[这个网站](http://stackoverflow.com/questions/419163/what-does-if-name-main-do)的讲解，如果当前这个py文件是被执行的，那么`__name__`在本py文件中的值是`__main__`，如果这个py文件是被作为模块引入的，那么`__name__`在那个py文件中的值是本py文件作为模块的模块名。

比如说现在你随便新建一个test.py文件，这个py文件里面就简单打印`__name__`的值，然后我们再打开终端，运行：
```
    python3 test.py
```
这个时候打印的是： `__main__` 。而如果你进入python的REPL环境，再输入：
`import test`

这个时候你会发现`__name__`的值是字符 "test"。

如果是mymodule模块里的mymod.py文件（也就是新建一个mymodule文件夹，里面再新建一个mymod.py文件。），那么mymod.py文件里面其`__name__`的值是 "mymodule.mymod"。



## 安装python高级知识

### 从源码安装python
从源码安装python，那么可能有其他一些依赖你需要预先安装。


- zlib 和 zlib-devel 
- opensll 和 openssl-devel ，如果遇到什么 ssl.h 文件找不到通常是缺少这个。
- sqlite-devel 和你 `import sqlite3` 有关，否则将会提示找不到 `_sqlite3` ，你需要重新编译python。



### windows下使用pip
windows下使用pip安装，如果是wheel包，那么可能就直接装上了，有些简单的直接安装源码即可，有些要调用cython编译过程的那么就必须确保python装上了 `VC++ for python` ，官网下载地址在 [这里](https://www.microsoft.com/en-us/download/confirmation.aspx?id=44266) 。

额外提一点的是 Visual C++ Compiler for Python 2.7 的 math里面没有 `rint` 这个方法，总之和linux下还是稍微差异的。 



[^1]: 也就是用chmod加上可执行权限那么可以直接执行了。第一行完整的解释是什么通过*env*程序来搜索python的路径，这样代码更具可移植性。这个问题还可以多说一点，后面会谈到virtualenv这个模块，类似上面这种引用python的写法是可以确保调用的是python虚拟环境下的python解释器。

