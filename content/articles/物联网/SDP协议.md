Title: SDP协议
Slug: SDP-protocol
Date: 2019-08-30
Modified: 2019-08-30
Tags: protocol



[TOC]

## 前言

本文翻译自 RFC2327 即 SDP协议英文版，本文简要翻译之。

## 简介

在互联网组播（multicast）网络架构中【Mbone -- 组播，IP数据传输三大模型之一，另外还有单播和广播。】一个会话目录工具被应用于分发多媒体会议和协商会议地址和分享会议的具体工具信息。本文档描述了一个会话描述协议用于这个目的，本备忘录不描述组播地址分配或者SDP信息分发细节。这些都描述在相关备忘录中，SDP也不打算讨论媒体的编码细节。

## 背景

Mbone是互联网的一部分支持IP组播模式，所以允许有效的多对多沟通交流。这个在多媒体会议中经常用到。这样的会议通常都有这样的性质，那就是会议的组员并不要求协调好，去接收一个会议，一个用户，在Mbone站点通常只需要知道会议的数据流的组播群地址和UDP的端口号。

【TODO】

## 术语列表

【TODO】

## SDP用法

### 组播声明

SDP是一个会话描述协议用户多媒体会话。一个常见的使用模式是一个client去声明一个会议会话，通过周期组播一个声明包到一个大家知道的组播地址和端口号哪里，使用的是会话声明协议SAP（Session Announcement Protocol）。

SAP包是一个UDP套接字用如下格式：

```
|--------------------|
| SAP header         |
|--------------------|
| text payload       |
|//////////
```

header是SAP的header，SAP具体描述在相关备忘录中。

text payload是SDP协议描述，具体内容就是本备忘录描述的。text payload不应该大于1KB，如果是SAP声明，一个会话声明只允许一个套接字。



### Email和WWW Announcements

另一个说法是传输会话描述包括电子邮箱和the World Wide Web。对于email和WWW的分发，应该使用的是MIME content type  "application/sdp" 。这将使得那些参与会话中的应用，比如WWW client或电子邮箱的阅读器，自动按照标准方式去加载。

注意组播会话声明确立，只是通过电子邮箱或者WWW的，不一定能够接受到这个会话，因为组播会话可能被严格限定在某个scope内。而访问这个WWW服务器或者接收邮箱可能是在这个scope之外的。SAP声明并没有这个不匹配问题。

## 依赖和建议

SDP的目的是要传输关于媒体流的信息，在多媒体会话中，去允许会话描述的接受者参与到会话中。SDP主要是用于在互联网中，当然它也足够通用是能够使用在其他网络环境中去描述会议。

多媒体会话，被描述为一系列的媒体流，存在于某个时间段内。媒体流可以是多对多的。一个会话活跃的时间应该是非连续的。

因此在互联网上遥远的组播会话和很多其他形式的会议不同的，任何人都可以接受并参与到这个会话信道中（除非这个会话信道被加密了）。这种环境下，SDP服务有两个基本点：它是一种方法用于沟通会话的存在，它是一种方法用于传输充足的信息使得会话中的参与者能够参与进来。在组播环境下，只有第二点要求似乎是相关的。

因此SDP包括：

- 会话的名字和意图
- 会话的活跃时间
- 会话中媒体的组成
- 接收这些媒体的细节（地址，端口号。格式等）

因为参与会话的资源可能被限定，还可能需要以下额外的信息：

- 关于会议带宽的信息
- 会话中人员回应的联系信息

一般来说，SDP一定要传输充足的信息，好使得人们可以加入会话中来（包括可能的加密key），然后也需要告知那些信息让想要加入进来的人们知道。



### 媒体信息

SDP 包括

- 媒体的类型（视频、音频等）

- 传输协议（RTP/UDP/IP H.320 等）
- 媒体格式（H.261 vidoe MPEG viedo 等）

对于IP组播会话来说，以下信息将要被传输

- 组播媒体的地址
- 组播媒体的端口号

这个地址和端口号是组播流的目标地址和端口号，不管是发送或者接收等。

对于IP单播会话来说，以下信息将要被传输：

- 远程媒体的地址
- 远程连接的端口号

具体地址和端口号的格式由媒体和传输协议定义。默认情况下，这就是远程发送数据的机器地址和端口号和短程接收数据的地址和端口号。有时，一些媒体可能被定义为通过建立某种control channel来传输某种媒体流。

### 时间信息

会话可能被时间限定或者没有，不管怎么样，会话都会被限定。它们只会在某个具体的时间段内活跃。

SDP能够传输

【TODO】



## SDP具体细节

SDP会话描述的整个文本都应该使用 ISO 10646字符集（在UTF-8字符集中）。SDP域的名字和属性的名字只能够使用 US-ASCII 字符集，但是文本领域和属性值可以使用ISO10646字符集。文本格式